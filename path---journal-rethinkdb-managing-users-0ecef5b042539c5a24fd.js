webpackJsonp([0xe34eca9aa517],{355:function(e,a){e.exports={data:{site:{siteMetadata:{title:"Ulises Avila",profesion:" - Web Developer"}},markdownRemark:{html:'<h2 id="introduction"><a href="#introduction" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Introduction</h2>\n<p>When managing databases, one is in the need to configure mechanisms of authentication which can extend to authorization mechanisms. RethinkDB has a plain simple users mechanism to control user creation, permissions given and scope of action.</p>\n<p>In this tutorial you will apply several configurations of permissions to three different users.</p>\n<h2 id="requeriments"><a href="#requeriments" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Requeriments</h2>\n<ul>\n<li>Have one server with RethinkDB running. Check installation guide of RethinkDB here in Vultr.</li>\n</ul>\n<h2 id="setting-things-up"><a href="#setting-things-up" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Setting things up</h2>\n<p>This administrative task is done via web panel. So after ssh login to your dopplet run <code class="language-text">rethinkdb</code> or <code class="language-text">rethinkdb --bind all</code> depending if you are tunneling or not so you can access your panel via <code class="language-text">domain_name:8080</code> or <code class="language-text">dopplet_url:8080</code>. Everything is done in the <code class="language-text">Data Explorer</code> section placed in the navbar.</p>\n<p>RethinkDB makes you the <code class="language-text">admin</code> user when accessing it via web panel, so you have total control of the node.</p>\n<h3 id="adding-users"><a href="#adding-users" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Adding users</h3>\n<p>To avoid confusion between examples we are going to have several users, one per example. Users are stored in the table <code class="language-text">users</code> in the <code class="language-text">rethinkdb</code> database. To create them you use the <code class="language-text">insert</code> function passing a JSON object, to finish this step you are going to pass a JSON array of 3 members like this:</p>\n<div class="gatsby-highlight">\n      <pre class="language-text"><code class="language-text">r.db(&#39;rethinkdb&#39;).table(&#39;users&#39;).insert([\n    {id: &#39;john&#39;, password: &#39;pass1&#39;},\n    {id: &#39;jack&#39;, password: &#39;pass2&#39;},\n    {id: &#39;joe&#39;, password: &#39;pass3&#39;},\n    ])</code></pre>\n      </div>\n<p>If everything went ok, you will get as response an object like this:</p>\n<div class="gatsby-highlight">\n      <pre class="language-text"><code class="language-text">{\n    &quot;deleted&quot;: 0 ,\n    &quot;errors&quot;: 0 ,\n    &quot;inserted&quot;: 3 ,\n    &quot;replaced&quot;: 0 ,\n    &quot;skipped&quot;: 0 ,\n    &quot;unchanged&quot;: 0\n}</code></pre>\n      </div>\n<p>It is important to note that once created you cannot modify the <code class="language-text">id</code> of the users, you have to delete the entire user so you can add it again with the desired name.</p>\n<h3 id="adding-tables"><a href="#adding-tables" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Adding tables</h3>\n<p>To encapsulate the tests you are adding two tables into <code class="language-text">test</code> database, <code class="language-text">CompactCameras</code> and <code class="language-text">DslrCameras</code>, you are executing two times the create method:</p>\n<div class="gatsby-highlight">\n      <pre class="language-text"><code class="language-text">r.db(&#39;test&#39;).tableCreate(&#39;CompactCameras&#39;)\nr.db(&#39;test&#39;).tableCreate(&#39;DslrCameras&#39;)</code></pre>\n      </div>\n<p>If everything went fine, you will get as response one medium sized JSON object telling you the details of each table. </p>\n<p>With this you are ready to jump to the examples.</p>\n<h2 id="example-1"><a href="#example-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example 1</h2>\n<p>In this example <code class="language-text">john</code> gets to read and write from the table <code class="language-text">CompactCameras</code> with the help of the <code class="language-text">grant</code> method:</p>\n<div class="gatsby-highlight">\n      <pre class="language-text"><code class="language-text">r.db(&#39;test&#39;).table(&#39;CompactCameras&#39;).grant(&#39;john&#39;, {read: true, write: true});</code></pre>\n      </div>\n<p>After executing this command you will get an answer like this:</p>\n<p>{</p>\n<div class="gatsby-highlight">\n      <pre class="language-text"><code class="language-text">&quot;granted&quot;: 1 ,\n&quot;permissions_changes&quot;: [\n    {\n        &quot;new_val&quot;: {\n            &quot;read&quot;: true ,\n            &quot;write&quot;: true\n        } ,\n        &quot;old_val&quot;: null\n    }\n]</code></pre>\n      </div>\n<p>}</p>\n<p>It is telling that permissions have gotten changes. It is also reporting the state of the configuration between <code class="language-text">old_val</code> and <code class="language-text">new_val</code>. </p>\n<p>There is not anything left to do for configuring permission to this user, you could go and use this user in your application\'s authentication and everything would be working. Now you can review the second example.</p>\n<h2 id="example-2"><a href="#example-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example 2</h2>\n<p>In this example <code class="language-text">jack</code> gets to read and write from the table <code class="language-text">CompactCameras</code> and read from <code class="language-text">DslrCameras</code>, seeing the last example you can infer that you have to execute the command two times,each for every table to modify:\n<br>\nr.db(\'test\').table(\'CompactCameras\').grant(\'jack\', {read: true, write: true});\nr.db(\'test\').table(\'DslrCameras\').grant(\'jack\', {read: true});</p>\n<p>You will get one response as the one from example 1 telling you the changes that have been done. The important thing in this example is that one user can have active permissions on different elements at the same time.</p>\n<h2 id="example-3"><a href="#example-3" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example 3</h2>\n<p>In this example <code class="language-text">joe</code> gets access to all configurations of <code class="language-text">test</code> database with the exception of <code class="language-text">DslrCameras</code>, again you have to execute each command separately:</p>\n<div class="gatsby-highlight">\n      <pre class="language-text"><code class="language-text">r.db(&#39;test&#39;).grant(&#39;joe&#39;, {read: true, write: true});\nr.db(&#39;test&#39;).table(&#39;DslrCameras&#39;).grant(&#39;joe&#39;, {read: false, write: false});</code></pre>\n      </div>\n<p>The first thing to note in this example is that the <code class="language-text">grant</code> command can be applied to any level of the structure, where the levels are: <code class="language-text">r</code> as all the database, <code class="language-text">r.db</code> as one database and <code class="language-text">r.db.table</code> as one table in one database.</p>\n<p>The second thing to note is that permissions in broader scopes get inherited to smaller scopes, using example 3 for this leads to say that <code class="language-text">joe</code> have read and write access to any element in <code class="language-text">test</code> database until it is specified that he cannot do it in the table <code class="language-text">DslrCameras</code>. There is one example left.</p>\n<h2 id="example-4"><a href="#example-4" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example 4</h2>\n<p>Any global permission must be written directly to <code class="language-text">r</code> such as letting <code class="language-text">joe</code> full access to the server with the following:</p>\n<div class="gatsby-highlight">\n      <pre class="language-text"><code class="language-text">r.grant(&#39;joe&#39;, {read: true, write: true, config: true, connect: true});</code></pre>\n      </div>\n<p>The last thing to note is that the <code class="language-text">connect</code> option is only eligible for global scope.</p>\n<h2 id="conclusion"><a href="#conclusion" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Conclusion</h2>\n<p>When a user is added it does not have any permissions, but you can set values with the <code class="language-text">grant</code> method, after that permissions not set are considered as false. The simplicity of RethinkDB does not let us to login to the admin panel as any of the users created in this tutorial, then the next step would be to create an app that connects to your server so you can test your user permissions. You can go and check the official RethinkDB and see the offering of drivers for your programming language of choice.</p>',frontmatter:{date:"11 June, 2018",path:"/managing-users/",title:"Administrating users in RethinkDB",category:"rethinkdb",foreword:"Users are a vital part of database management, in this tutorial you will learn ho to create them."}}},pathContext:{id:"/home/ulises/Sites/ulises-site/src/pages/posts/rethinkdb/managing-users/managing-users.md absPath of file >>> MarkdownRemark"}}}});
//# sourceMappingURL=path---journal-rethinkdb-managing-users-0ecef5b042539c5a24fd.js.map